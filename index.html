<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Pranayama Timer — Без голоса, с бинауральными</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { background: #111; color: #eee; font-family: sans-serif; text-align: center; }
  h1 { font-size: 2em; margin-top: 20px; }
  .phase { font-size: 5em; margin-top: 20px; }
  button { padding: 10px 20px; font-size: 1.2em; margin-top: 30px; }
</style>
</head>
<body>
<h1>Pranayama Timer</h1>
<div id="phase" class="phase">Готов?</div>
<button onclick="start()">Старт</button>
<script>
let ctx, oscL, oscR;
function playBinaural(baseFreq, diff) {
  ctx = new (window.AudioContext || window.webkitAudioContext)();
  oscL = ctx.createOscillator();
  oscR = ctx.createOscillator();
  let gainL = ctx.createGain();
  let gainR = ctx.createGain();
  let splitter = ctx.createChannelMerger(2);

  oscL.frequency.value = baseFreq - diff/2;
  oscR.frequency.value = baseFreq + diff/2;

  oscL.connect(gainL).connect(splitter, 0, 0);
  oscR.connect(gainR).connect(splitter, 0, 1);
  splitter.connect(ctx.destination);

  oscL.start();
  oscR.start();
}
function stopBinaural() {
  if (oscL) oscL.stop();
  if (oscR) oscR.stop();
}
function start() {
  document.getElementById('phase').textContent = "Вдох";
  playBinaural(220, 10); // вдох альфа
  setTimeout(()=>{
    stopBinaural();
    document.getElementById('phase').textContent = "Задержка";
    playBinaural(220, 6); // тета
  }, 5000);
  setTimeout(()=>{
    stopBinaural();
    document.getElementById('phase').textContent = "Выдох";
    playBinaural(220, 3); // дельта
  }, 10000);
  setTimeout(()=>{
    stopBinaural();
    document.getElementById('phase').textContent = "Готов?";
  }, 15000);
}
</script>
</body>
</html>
